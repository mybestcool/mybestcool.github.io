<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>致良知</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="Lucus Gu">
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="致良知">
<meta property="og:url" content="https://mybestcool.github.io/index.html">
<meta property="og:site_name" content="致良知">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="致良知">
  
    <link rel="alternate" href="/atom.xml" title="致良知" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">致良知</a></h1>
    <p><a href="/">知行合一</a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
      
        <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content">




  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2018/04/17/ethereum-wp/">
  <time datetime="2018-04-17T14:26:01.000Z">
    2018-04-17
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2018/04/17/ethereum-wp/">以太坊白皮书学习记录</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h2 id="比特币的核心概念"><a href="#比特币的核心概念" class="headerlink" title="比特币的核心概念"></a>比特币的核心概念</h2><h3 id="作为状态转换系统的比特币"><a href="#作为状态转换系统的比特币" class="headerlink" title="作为状态转换系统的比特币"></a>作为状态转换系统的比特币</h3><ol>
<li><p>转换函数</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">APPLY(S,TX) ­&gt; S&apos; or ERROR</span><br></pre></td></tr></table></figure>
<ul>
<li>转换函数解析：<ol>
<li>交易的每个输入：<ul>
<li>如果引用的UTXO不存在于现在的状态中（S），返回错误提示</li>
<li>如果签名与UTXO所有者的签名不一致，返回错误提示</li>
</ul>
</li>
<li>如果所有的UTXO输入面值总额小于所有的UTXO输出面值总额，返回错误提示</li>
<li>返回新状态S’,新状态S’中移除了所有的输入UTXO，增加了所有的输出UTXO</li>
</ol>
</li>
</ul>
</li>
<li><p>状态结构（UTXO:未花费的交易输出，unspent transaction outputs）,包含一个面值和所有者（由20个字节的本质上是密码学公钥的地址所定义[1]）。一笔交易包括一个或多个输入和一个或多个输出。每个输入包含一个对现有UTXO的引用和由与所有者地址相对应的私钥创建的密码学签名。每个输出包含一个新的加入到状态中的UTXO。</p>
</li>
</ol>
<h3 id="挖矿"><a href="#挖矿" class="headerlink" title="挖矿"></a>挖矿</h3><ol>
<li>区块<ol>
<li>网络中的节点不断尝试把交易结果打包成“区块”</li>
<li>区块大约每十分钟产生一块</li>
<li>每个区块包含：时间戳、随机数、对上一个区块的引用（即hash值）、上一区块生成以来发生的所有交易列表。核对规则如下：<ul>
<li>检查区块引用的上一个区块是否存在且有效</li>
<li>检查区块的时间戳是否晚于以前的区块的时间戳，而且早于未来2小时</li>
<li>检查区块的工作量证明是否有效</li>
<li>将上一个区块的最终状态赋于S[0]</li>
<li>假设TX是区块的交易列表，包含n笔交易。对于属于0……n-1的所有i,进行状态转换S[i+1] = APPLY(S[i],TX[i])。如果任何一笔交易i在状态转换中出错，退出程序，返回错误。</li>
<li>返回正确，状态S[n]是这一区块的最终状态</li>
</ul>
</li>
</ol>
</li>
<li>矿工的作用和奖励<ol>
<li>使用共识算法“工作量证明”，即不停的创建区块，并设置区块的随机值等随机手段，然后hash这个区块，得出hash值是否小于2^190(190是随着比特币的增长，不断变小的值)，即为创建区块成功。创建区块者可以得到25BTC的奖励</li>
<li>矿工将交易打包到区块链。交易中的输入往往大于输出，差额部分就作为“交易费用”付给矿工。</li>
</ol>
</li>
</ol>
<h3 id="默克尔树"><a href="#默克尔树" class="headerlink" title="默克尔树"></a>默克尔树</h3><ol>
<li>定义：默克尔树是一种二叉树，由一组叶节点、一组中间节点和一个根节点构成。最下面的大量的叶节点包含基础数据，每个中间节点是它的两个子节点的哈希，根节点也是由它的两个子节点的哈希，代表了默克尔树的顶部。</li>
<li>特点：允许区块的数据可以零散地传送。节点可以从一个源下载区块头，从另外的源下载与其有关的树的其它部分，而依然能够确认所有的数据都是正确的</li>
</ol>
<h3 id="比特币智能合约的问题"><a href="#比特币智能合约的问题" class="headerlink" title="比特币智能合约的问题"></a>比特币智能合约的问题</h3><ol>
<li>缺少图灵完备</li>
<li>价值盲</li>
<li>缺少状态</li>
<li>区块链盲</li>
</ol>
<h2 id="以太坊的核心概念"><a href="#以太坊的核心概念" class="headerlink" title="以太坊的核心概念"></a>以太坊的核心概念</h2><h3 id="以太坊账户"><a href="#以太坊账户" class="headerlink" title="以太坊账户"></a>以太坊账户</h3><ol>
<li>以太坊状态：是由被称为“账户”的对象和在两个帐号之间转移价值和信息的状态转换构成</li>
<li>以太坊账户包含四个部分：<ol>
<li>随机数，用于确定每笔交易只能被处理一次的计数器</li>
<li>账户目前的以太币余额</li>
<li>账户的合约代码，如果有的话</li>
<li>账户的存储，默认为空</li>
</ol>
</li>
<li>分成两类账户：外部所有账户（私钥控制）、合约账户（合约代码控制）</li>
</ol>
<h3 id="消息和交易"><a href="#消息和交易" class="headerlink" title="消息和交易"></a>消息和交易</h3><ol>
<li>消息，类似于比特币的交易，但有三点不同<ol>
<li>以太坊的消息可以由外部实体或者合约创建，然而比特币的交易只能从外部创建</li>
<li>以太坊消息可以选择包含数据</li>
<li>如果以太坊消息的接受者是合约账户，可以选择进行回应，这意味着以太坊消息也包含函数概念</li>
</ol>
</li>
<li>交易是指存储的从外部账户发出的消息的签名数据包，包含<ol>
<li>消息的接收者</li>
<li>用于确认发送者的签名</li>
<li>发送者给接收者的以太币数量</li>
<li>一个可选的数据字段</li>
<li>STARTGAS值</li>
<li>GASPRICE值</li>
</ol>
</li>
<li>创建合约有单独的交易类型和相应的消息类型；合约的地址是基于账号随机数和交易数据的哈希计算出来的</li>
</ol>
<h3 id="以太坊状态转换函数"><a href="#以太坊状态转换函数" class="headerlink" title="以太坊状态转换函数"></a>以太坊状态转换函数</h3><ol>
<li><p>状态转换函数</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">APPLY(S,TX) ­&gt; S&apos; or ERROR</span><br></pre></td></tr></table></figure>
<ul>
<li>转换函数解析：<ol>
<li>检查交易的格式是否正确（即有正确数值）、签名是否有效和随机数是否与发送者账户的随机数匹配。如否，返回错误</li>
<li>计算交易费用:fee=STARTGAS * GASPRICE，并从签名中确定发送者的地址。从发送者的账户中减去交易费用和增加发送者的随机数。如果账户余额不足，返回错误</li>
<li>设定初值GAS = STARTGAS，并根据交易中的字节数减去一定量的瓦斯值</li>
<li>从发送者的账户转移价值到接收者账户。如果接收账户还不存在，创建此账户。如果接收账户是一个合约，运行合约的代码，直到代码运行结束或者瓦斯用完。</li>
<li>如果因为发送者账户没有足够的钱或者代码执行耗尽瓦斯导致价值转移失败，恢复原来的状态，但是还需要支付交易费用，交易费用加至矿工账户。</li>
<li>否则，将所有剩余的瓦斯归还给发送者，消耗掉的瓦斯作为交易费用发送给矿工</li>
</ol>
</li>
</ul>
</li>
</ol>
<h3 id="代码执行"><a href="#代码执行" class="headerlink" title="代码执行"></a>代码执行</h3><ol>
<li>以太坊虚拟机：EVM</li>
<li>可以访问三种数据空间：堆栈、内存、合约的长期存储</li>
</ol>
<h3 id="区块链和挖矿"><a href="#区块链和挖矿" class="headerlink" title="区块链和挖矿"></a>区块链和挖矿</h3><ol>
<li>每个区块：不仅包含交易记录和最近的状态，还包含区块序号和难度值。核对规则如下<ol>
<li>检查区块引用的上一个区块是否存在和有效</li>
<li>检查区块的时间戳是否比引用的上一个区块大，而且小于15分钟</li>
<li>检查区块序号、难度值、 交易根，叔根和瓦斯限额（许多以太坊特有的底层概念）是否有效</li>
<li>检查区块的工作量证明是否有效</li>
<li>将S[0]赋值为上一个区块的STATE_ROOT</li>
<li>将TX赋值为区块的交易列表，一共有n笔交易。对于属于0……n-1的i，进行状态转换S[i+1] = APPLY(S[i],TX[i])。如果任何一个转换发生错误，或者程序执行到此处所花费的瓦斯（gas）超过了GASLIMIT，返回错误。</li>
<li>用S[n]给S_FINAL赋值, 向矿工支付区块奖励</li>
<li>检查S_FINAL是否与STATE_ROOT相同。如果相同，区块是有效的。否则，区块是无效的</li>
</ol>
</li>
<li>矿工的奖励，同比特币</li>
</ol>
<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><ol>
<li>代币系统</li>
<li>金融衍生品和价值稳定的货币</li>
<li>身份和信誉系统</li>
<li>去中心化存储</li>
<li>去中心化资质组织</li>
<li>其他<ol>
<li>储蓄钱包</li>
<li>作物保险</li>
<li>一个去中心化的数据发布器</li>
<li>云计算</li>
<li>点对点赌博</li>
<li>预测市场</li>
<li>链上去中心化市场</li>
</ol>
</li>
</ol>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2018/04/17/blockchain/">
  <time datetime="2018-04-17T14:24:38.000Z">
    2018-04-17
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2018/04/17/blockchain/">区块链概况</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h2 id="区块链的一些概念"><a href="#区块链的一些概念" class="headerlink" title="区块链的一些概念"></a>区块链的一些概念</h2><h3 id="区块链三要素"><a href="#区块链三要素" class="headerlink" title="区块链三要素"></a>区块链三要素</h3><ul>
<li>共享帐本</li>
<li>共识算法<ol>
<li>工作量证明机制（PoW,Proof of Work）</li>
<li>股权证明机制（PoS，Proof of Stake）</li>
<li>委托股权证明机制（DPos，Delegated Proof of Stake）</li>
<li>瑞波共识机制(Ripple Consensus)</li>
<li>实用拜占庭容错算法（Practical Byzantine Fault Tolerance）</li>
<li>恒星共识协议(Stellar Consensus Protocol)</li>
</ol>
</li>
<li>P2P网络</li>
</ul>
<h3 id="区块链类型"><a href="#区块链类型" class="headerlink" title="区块链类型"></a>区块链类型</h3><ul>
<li>公有链</li>
<li>私有链</li>
<li>联盟链</li>
</ul>
<h3 id="区块链应用方式"><a href="#区块链应用方式" class="headerlink" title="区块链应用方式"></a>区块链应用方式</h3><ul>
<li>密码学货币（Crypto Currency）</li>
<li>分布式账本（DTL，Distributed Ledger Technology）</li>
<li>智能合约（Smart Contract）</li>
</ul>
<h2 id="第一代区块链技术"><a href="#第一代区块链技术" class="headerlink" title="第一代区块链技术"></a>第一代区块链技术</h2><ul>
<li>bitcoin（比特币）<ul>
<li>功能：密码学货币、几乎没有智能合约</li>
<li>类型：公有链</li>
<li>共识算法：工作量证明机制</li>
<li>开发语言：c++</li>
<li>状态：目前应用度高、扩展性差</li>
</ul>
</li>
</ul>
<h2 id="第二代区块链技术"><a href="#第二代区块链技术" class="headerlink" title="第二代区块链技术"></a>第二代区块链技术</h2><ul>
<li>bitshares（比特股）<ul>
<li>开发者：Dan</li>
<li>功能：分布式账本，受限的智-能合约</li>
<li>类型：主要是公有链</li>
<li>共识算法：委托授权的权益证明机制</li>
<li>开发语言：c++</li>
<li>状态：没有形成核心团队</li>
</ul>
</li>
<li>ripple（瑞波币）<ul>
<li>功能：分布式账本，目前不支持智能合约</li>
<li>类型：主要是公有链</li>
<li>共识机制：瑞波共识机制</li>
<li>开发语言：c++</li>
<li>状态：致力于与银行合作</li>
</ul>
</li>
<li>HyperLedger（超级账本）<ul>
<li>功能：分布式账本、智能合约</li>
<li>类型：主要是联盟链</li>
<li>共识机制：实用拜占庭容错算法</li>
<li>开发语言：go、python</li>
<li>状态：致力于与金融行业</li>
</ul>
</li>
<li>ethereum（以太坊）– 推荐<ul>
<li>开发者：V神</li>
<li>功能：分布式账本、智能合约</li>
<li>类型：主要是公有链</li>
<li>共识算法：工作量证明机制，以后改成权益证明机制</li>
<li>开发语言：go</li>
<li>状态：目前应用度高、有明确规划<ul>
<li>myetherwallet 钱包：<a href="https://www.myetherwallet.com" target="_blank" rel="noopener">https://www.myetherwallet.com</a></li>
<li>eth交易历史查询：<a href="https://etherscan.io/" target="_blank" rel="noopener">https://etherscan.io/</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第三代区块链技术"><a href="#第三代区块链技术" class="headerlink" title="第三代区块链技术"></a>第三代区块链技术</h2><ul>
<li>EOS – 推荐<ul>
<li>开发者：Dan</li>
<li>类型：公有链</li>
<li>共识算法：DPOS，百万TPS</li>
<li>特点：<ul>
<li>可以跨链、角色权限管理</li>
<li>交易免费、EOS代币保值（DAPP的计算资源由其拥有的EOS代币量决定）</li>
<li>开发dapp简易</li>
</ul>
</li>
<li>状态<ul>
<li>目前还没有开发完成，但已在以太坊发币</li>
<li>EOS官网：<a href="http://eos.io" target="_blank" rel="noopener">http://eos.io</a></li>
<li>EOS代币发行历史查看：<a href="http://eoschart.com/?lang=zh" target="_blank" rel="noopener">http://eoschart.com/?lang=zh</a></li>
</ul>
</li>
<li>购买方式<ol>
<li>在加密货币平台上，如OTCBTC上用支付宝购买一些ETH，100rmb左右</li>
<li>使用chrome浏览器，安装MetaMask，并注册帐号</li>
<li>将从OTCBTC平台上购买的货币转移到MetaMask帐号</li>
<li>在EOS官网众筹EOS币，到第二天取出EOS币，并转移到MetaMask帐号</li>
</ol>
</li>
</ul>
</li>
</ul>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2018/04/03/mongodbstudy/">
  <time datetime="2018-04-03T10:43:09.000Z">
    2018-04-03
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2018/04/03/mongodbstudy/">Mongodb学习总结</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><pre><code>https://www.mongodb.com/

http://docs.mongoing.com/index.html

http://www.mongodb.org.cn/
</code></pre><h2 id="mongo的安装"><a href="#mongo的安装" class="headerlink" title="mongo的安装"></a>mongo的安装</h2><pre><code>1. 下载社区版本 https://www.mongodb.com/download-center?jmp=navcommunity
2. 安装目录下有哪些程序
</code></pre><table>
<thead>
<tr>
<th>程序</th>
<th>说明</th>
<th>使用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>mongo</td>
<td>mongo客户端</td>
<td>默认连接local：27017 用–help查看帮助</td>
</tr>
<tr>
<td>mongod</td>
<td>mongo服务器</td>
<td>要先建立dbpath才能启动，可以用命令行创建，也可以根据服务器的配置来创建（一般配置systemLog和stroage:dbPath，使用yaml格式）。用mongod –install（-f configpath）在windows下注册成服务</td>
</tr>
<tr>
<td>mongodump</td>
<td>数据库备份</td>
<td>mongodump -h dbhost -d dbname -o dbdirectory</td>
</tr>
<tr>
<td>mongorestore</td>
<td>数据库恢复</td>
<td>mongorestore -h <hostname>&lt;:port&gt; -d dbname <path></path></hostname></td>
</tr>
<tr>
<td>mongoexport</td>
<td>集合备份</td>
<td>mongoexport -d test -c students -o students.dat</td>
</tr>
<tr>
<td>mongoimport</td>
<td>集合恢复</td>
<td>mongoimport -d test -c students students.dat</td>
</tr>
<tr>
<td>mongofiles</td>
<td>存取文件</td>
<td>mongofiles put E:xxx.data/mongofiles get E:xxx.data</td>
</tr>
<tr>
<td>mongooplog</td>
<td>oplog重放</td>
<td>mongooplog –port 20001 -u* –authenticationDatabase=admin –from=172.16.201.73:27017</td>
</tr>
<tr>
<td>mongoperf</td>
<td>独立检查mongoDB的I/O性能工具</td>
<td></td>
</tr>
<tr>
<td>mongos</td>
<td>集群工具</td>
<td></td>
</tr>
<tr>
<td>mongostat</td>
<td>状态监控工具</td>
<td></td>
</tr>
<tr>
<td>mongotop</td>
<td>性能监控工具</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="shell命令"><a href="#shell命令" class="headerlink" title="shell命令"></a>shell命令</h2><table>
<thead>
<tr>
<th>操作类型</th>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>增</td>
<td>insert</td>
<td></td>
</tr>
<tr>
<td>删</td>
<td>remove</td>
<td></td>
</tr>
<tr>
<td>查</td>
<td>find</td>
<td>更加复杂的有条件查询：比较查询操作符，逻辑查询操作符，元素查询操作符，评价查询查询操作，Geospatia查询操作符，数组查询操作符，位查询操作符</td>
</tr>
<tr>
<td>改</td>
<td>update</td>
<td>字段更新操作符，数组更新操作符，位更新操作符</td>
</tr>
<tr>
<td>聚合</td>
<td></td>
<td>group查询操作符，管道聚合阶段</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>大类</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Collection</td>
<td><a href="https://docs.mongodb.com/manual/reference/method/#collection" target="_blank" rel="noopener">https://docs.mongodb.com/manual/reference/method/#collection</a></td>
</tr>
<tr>
<td>Replication</td>
<td>…</td>
</tr>
<tr>
<td>Cursor</td>
<td>…</td>
</tr>
<tr>
<td>Sharding</td>
<td>…</td>
</tr>
<tr>
<td>Database</td>
<td>…</td>
</tr>
<tr>
<td>Subprocess</td>
<td>…</td>
</tr>
<tr>
<td>Query Plan Cache</td>
<td>… </td>
</tr>
<tr>
<td>Constructors</td>
<td>…</td>
</tr>
<tr>
<td>Bulk Write Operation</td>
<td>… </td>
</tr>
<tr>
<td>Connection</td>
<td>…</td>
</tr>
<tr>
<td>User Management</td>
<td>…  </td>
</tr>
<tr>
<td>Native</td>
<td>…</td>
</tr>
<tr>
<td>Role Management</td>
<td>… </td>
</tr>
</tbody>
</table>
<h2 id="理论学习（基本概念）"><a href="#理论学习（基本概念）" class="headerlink" title="理论学习（基本概念）"></a>理论学习（基本概念）</h2><ol>
<li><p>基本类型</p>
<p> 对应bjson的格式</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>类型</th>
<th>类型</th>
<th>编号</th>
</tr>
</thead>
<tbody>
<tr>
<td>Double</td>
<td>双精度</td>
<td>1</td>
</tr>
<tr>
<td>String</td>
<td>字符串</td>
<td>2</td>
</tr>
<tr>
<td>Object</td>
<td>对象</td>
<td>3</td>
</tr>
<tr>
<td>Array</td>
<td>数组</td>
<td>4</td>
</tr>
<tr>
<td>Binary data</td>
<td>二进制对象</td>
<td>5</td>
</tr>
<tr>
<td>Object id</td>
<td>对象id</td>
<td>7</td>
</tr>
<tr>
<td>Boolean</td>
<td>布尔值</td>
<td>8</td>
</tr>
<tr>
<td>Date</td>
<td>日期</td>
<td>9</td>
</tr>
<tr>
<td>Null</td>
<td>未定义</td>
<td>10</td>
</tr>
<tr>
<td>Regular Expression</td>
<td>正则表达式</td>
<td>11</td>
</tr>
<tr>
<td>JavaScript</td>
<td>JavaScript代码</td>
<td>13</td>
</tr>
<tr>
<td>Symbol</td>
<td>符号</td>
<td>14</td>
</tr>
<tr>
<td>JavaScript (with scope)</td>
<td>JavaScript代码(带范围)</td>
<td>15</td>
</tr>
<tr>
<td>32-bit integer</td>
<td>32 位整数</td>
<td>16</td>
</tr>
<tr>
<td>Timestamp</td>
<td>时间戳</td>
<td>17</td>
</tr>
<tr>
<td>64-bit integer</td>
<td>64 位整数</td>
<td>18</td>
</tr>
<tr>
<td>Min key</td>
<td>最小键</td>
<td>255</td>
</tr>
<tr>
<td>Max key</td>
<td>最大键</td>
<td>127</td>
</tr>
</tbody>
</table>
<ol start="2">
<li><p>文档：是mongodb中数据的基本单元（类似于关系数据库的行，但比行要复杂），多个键及其关联的值放在一起就是文档。mongodb文件存储格式为bjson。</p>
<ul>
<li>示例{“firstName”:”egger”,”lastName”:”wong”}</li>
<li>文档中的健/值是有序的</li>
<li>文档中的值不仅可以是在双引号里的字符串，还可以是其他的类型，包括文档</li>
<li>mongodb区分类型和大小写</li>
<li>mongodb的文档不能有重复的键</li>
<li>文档的键是字符串，除了少数情况，键可以使用任意的utf-8字符<ul>
<li>键不能含有\0，这个表示键的结束</li>
<li>.和$有特别的意义，只能在特定的环境下使用</li>
<li>以下划线”_”开头的键是保留的（非严格要求）</li>
</ul>
</li>
<li><p>每个文档都有一个objectid，由客户端驱动生成，由”_id”表示</p>
<p>  ObjectId占用12字节的存储空间，每个字节两位十六进制数字，是一个24位的字符串。由“时间戳” 、“机器名”、“PID号”和“计数器”组成。使用机器名的好处是在分布式环境中能够避免单点计数的性能瓶颈。使用PID号的好处是支持同一机器内运行多个mongod实例。最终采用时间戳和计数器的组合来保证唯一性</p>
<ul>
<li>时间戳 4个字节。从标准纪元开始，单位为秒</li>
<li>机器名　　3个字节。所在主机的唯一标识符。通常是机器主机名的散列值，机器名通过Md5加密后取前三个字节</li>
<li>PID　　2个字节。为了确保在同一台机器上并发的多个进程产生的Objectld是唯一的，所以加上进程标识符(PID).注意到每次重启mongod进程后PID号通常会发生变化就可以了</li>
<li>计数器　　3个字节，表示的取值范围就是256<em>256</em>256=16777216。一个自动增加的计数器，确保相同进程同一秒产生的Obj ectld也是不一样的同一秒钟最多允许每个进程拥有2563 (16 777 216)不同的Objectld</li>
</ul>
</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
<th>11</th>
</tr>
</thead>
<tbody>
<tr>
<td>时间戳</td>
<td></td>
<td></td>
<td></td>
<td>机器名</td>
<td></td>
<td></td>
<td>PID</td>
<td></td>
<td>计数器</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ol start="3">
<li><p>集合：指一组文档（类似于关系数据库的表），可以看成没有模式的表</p>
<ul>
<li>集合是无模式的，文档的格式可以不一样。如{“name”:”egger”}，{“age”:18}可以在一个集合中。一般来说，这种情况还是推荐改成多个集合<ul>
<li>把各种各样的模式的文档混在一起，对开发和维护都会产生麻烦</li>
<li>在几个查询速度上会折损</li>
<li>创建索引的时候，会附加结构，尤其是唯一索引，模式一样会更加高效</li>
</ul>
</li>
<li>命名，用utf-8字符串来表示集合，有下列要求<ul>
<li>集合名不能有空字符串</li>
<li>集合名不能含有\0，这个表示集合名的结束</li>
<li>集合名不能以”system.”开头，这个是为系统集合保留的前缀</li>
<li>用户创建的集合名不能呢个含有保留字符</li>
</ul>
</li>
<li><p>子集合</p>
<p>  组织集合的一种惯例是使用”.”字符分开的按命名空间划分的子集合。在MongoDB中使用子集合来组织数据是很好的方法。</p>
<p>  例如，一个个人信息可能包含两个集合，分别是person.name和person.age。这样做的目的只是为了使组织结构更好些，也就是说person这个集合（这里根本就不需要存在）及其子集合没有任何关系。把数据库的名字放到集合名前面，得到就是集合的完全限定名，称为命名空间。命名空间的长度不得超过121字节，在实际使用当中应该小于100字节。</p>
<p>  很多MongoDB工具中都包含子集合。</p>
<ul>
<li>GridFS是一种存储大文件的协议，使用子集合来存储文件的元数据，这样就与内容块分开了</li>
<li>MongoDB的Web控制台通过子集合的方式将数据组织在DBTOP部分.</li>
<li>绝大多数驱动程序都提供语法糖，为访问指定集合的子集合提供方便。</li>
</ul>
</li>
</ul>
</li>
<li><p>数据库</p>
<p> MongoDB中多个集合可以组成一个数据库。mongodb的单个实例可以容纳多个独立的数据库，每个都有自己的集合和权限，不同的数据库放在不同的文件中。</p>
<p> 数据库也通过名字来标识。为满足以下条件的utf-8字符串</p>
<ul>
<li>不能是空字符串</li>
<li>不得含有’ ‘（空格)、.、$、/、\和\0 (空宇符)</li>
<li>应全部小写</li>
<li><p>最多64个字节</p>
<p>有一些数据库名是保留的，可以直接访问这些特殊作用的数据库</p>
</li>
<li><p>admin</p>
<p>  从权限的角度来看，这是“root”数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行，比如列出所有的数据库或者关闭服务器。</p>
</li>
<li><p>local</p>
<p>  这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合</p>
</li>
<li><p>config</p>
<p>  当Mongo用于分片设置时，config数据库在内部使用，用于保存分片的相关信息。</p>
</li>
</ul>
</li>
</ol>
<h2 id="客户端驱动"><a href="#客户端驱动" class="headerlink" title="客户端驱动"></a>客户端驱动</h2><pre><code>待补充
</code></pre><h2 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h2><pre><code>http://shift-alt-ctrl.iteye.com/blog/2255580
</code></pre><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><pre><code>待补充
</code></pre>
    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2018/04/03/hello-world/">
  <time datetime="2018-04-03T09:59:24.688Z">
    2018-04-03
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2018/04/03/hello-world/">Hello World</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>

</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2018 <a href="/">Lucus Gu</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>